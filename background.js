const allowedUrls = [
  "hal.science",
  "*.acm.org",
  "f-droid.org",
  "*.itch.io",
  "analises-ecologicas.com",
  "detectportal.firefox.com",
  "*.springernature.com",
  "par.nsf.gov",
  
  "selenium.dev",
  "wps.com",
  "*.cloudfront.net",
  "img-prod-cms-rt-microsoft-com.akamaized.net",
  "docs.huihoo.com",
  "geoviews.org",
  "jsj.top",
  "*.aligames.com",
  "biomedicaljour.com",
  "admis.tongji.edu.cn",
  "softcomputing.net",
  "fardapaper.ir",
  "shubhanshu.com",
  "luminati.io",
  "httpbin.org",
  "*.torproject.org",
  "worldscientific.com",
  "*.sciencedirectassets.com",
  "ise.ncsu.edu",
  "pgmpy.org",
  "serpapi.com",
  "scraperapi.com",
  "cs.cornell.edu",
  "repositori.upf.edu",
  "*.hsforms.net",
  "ocgy.ubc.ca",
  "*.arxiv.org",
  "*.163.com",
  "ieeexplore.ieee.org",
  "helda.helsinki.fi",
  "aitskadapa.ac.in",
  "datascienceassn.org",
  "direct.mit.edu",
  "accounts.google.de",
  "hess.copernicus.org",
  "pure.mpg.de",
  "*.xarray.dev",
  "oneecosystem.pensoft.net",
  "*.126.net",
  "wechat-article-exporter.deno.dev",
  "hm.baidu.com",
  "bam.nr-data.net",
  "researchgate.net",
  "gram.web.uah.es",
  "googletagmanager.com",
  "strongvpn.com",
  "marginaleffects.com",
  "pyro.ai",
  "*.nasa.gov",
  "eprints.whiterose.ac.uk",
  "*.alicdn.com",
  "10.10.0.166",
  "cambridge.org",
  "tensorflow.org",
  "koreascience.kr",
  "*.torontomu.ca",
  "eprints.gla.ac.uk",
  "api.altmetric.com",
  "elsevier.com",
  "nodejs.org",
  "*.psu.edu",
  "jne.ut.ac.ir",
  "geopandas.org",
  "raw.githubusercontent.com",
  "nuxt.com",
  "jstage.jst.go.jp",
  "meeting.qq.com",
  "jmes.humg.edu.vn",
  "repository.kulib.kyoto-u.ac.jp",
  "*.aliapp.org",
  "vtechworks.lib.vt.edu",
  "ieee-ims.org",
  "*.kde.org",
  "bigr.io",
  "mdpi.com",
  "*.deno.com",
  "epubs.siam.org",
  "*.sun.ac.za",
  "*.github.com",
  "ece.neu.edu",
  "*.elsevier.com",
  "igi-global.com",
  "iris.unitn.it",
  "durham-repository.worktribe.com",
  "*.newrelic.com",
  "builds.libav.org",
  "cse.iitkgp.ac.in",
  "nopr.niscpr.res.in",
  "*.googlesource.com",
  "studiostaticassetsprod.azureedge.net",
  "*.posit.co",
  "react-redux.js.org",
  "spatial.usc.edu",
  "*.google.de",
  "synapse.koreamed.org",
  "ageconsearch.umn.edu",
  "bookdown.org",
  "ecology.ghislainv.fr",
  "*.ssrn.com",
  "*.osgeo.org",
  "jmlr.org",
  "fonts.loli.net",
  "*.googleapis.com",
  "daac.ornl.gov",
  "xyflow.com",
  "accounts.google.com.np",
  "*.googlesyndication.com",
  "*.unl.edu",
  "cdn.techscience.cn",
  "researchportal.bath.ac.uk",
  "taylorfrancis.com",
  "bibliotekanauki.pl",
  "sciencedirect.com",
  "*.berkeley.edu",
  "flickerfree.org",
  "academia.edu",
  "klab.tch.harvard.edu",
  "mljar.com",
  "code.earthengine.google.com",
  "ifej.sanru.ac.ir",
  "felipebravom.com",
  "indexinvestorportfolios.com",
  "erj.ersjournals.com",
  "*.deno.dev",
  "aloki.hu",
  "scielo.br",
  "coursesteach.com",
  "search.proquest.com",
  "pypi.org",
  "e-tarjome.com",
  "*.aliyuncs.com",
  "g.3gl.net",
  "*.biomedcentral.com",
  "escholarship.org",
  "graph.qq.com",
  "ideals.illinois.edu",
  "reactnative.cn",
  "*.s3.amazonaws.com",
  "zz.bdstatic.com",
  "*.audacityteam.org",
  "zenodo.org",
  "*.clemson.edu",
  "*.lzu.edu.cn",
  "corinne-vacher.com",
  "link.springer.com",
  "yadda.icm.edu.pl",
  "tauri.app",
  "*.oaistatic.com",
  "learning1to1.net",
  "*.ptlogin2.qq.com",
  "*.jinshujucdn.com",
  "*.mlr.press",
  "analyticalsciencejournals.onlinelibrary.wiley.com",
  "cloudflare.com",
  "worldclim.org",
  "dl.acm.org",
  "research.ed.ac.uk",
  "elib.dlr.de",
  "iasj.net",
  "*.qqmail.com",
  "*.music.126.net",
  "*.wpscdn.com",
  "cs.toronto.edu",
  "iopscience.iop.org",
  "tandfonline.com",
  "*.conicet.gov.ar",
  "easy.dans.knaw.nl",
  "scitools.org.uk",
  "eprints.qut.edu.au",
  "vite.dev",
  "tianditu.gov.cn",
  "nrl.northumbria.ac.uk",
  "tristan.cordier.free.fr",
  "*.captcha.qq.com",
  "nph.onlinelibrary.wiley.com",
  "kresttechnology.com",
  "politesi.polimi.it",
  "platform-api.sharethis.com",
  "developer.android.com",
  "bsssjournals.onlinelibrary.wiley.com",
  "caislab.kaist.ac.kr",
  "jmirs.org",
  "powertechjournal.com",
  "dergipark.org.tr",
  "gmd.copernicus.org",
  "cje.net.cn",
  "infoscience.epfl.ch",
  "*.mlr-org.com",
  "*.yeepay.com",
  "portlandpress.com",
  "*.rsc.org",
  "biorxiv.org",
  "academicradiology.org",
  "wires.onlinelibrary.wiley.com",
  "cit.ctu.edu.vn",
  "js.trendmd.com",
  "bayesiancomputationbook.com",
  "annualreviews.org",
  "ncbi.nlm.nih.gov",
  "tspace.library.utoronto.ca",
  "gdal.org",
  "journals.asm.org",
  "*.office.net",
  "esajournals.onlinelibrary.wiley.com",
  "essd.copernicus.org",
  "sciltp.com",
  "cmake.org",
  "*.readthedocs.io",
  "cmap.polytechnique.fr",
  "lmb.informatik.uni-freiburg.de",
  "pure.york.ac.uk",
  "matplotlib.org",
  "report.qqweb.qq.com",
  "journals.sagepub.com",
  "*.pymc.io",
  "chatgpt.com",
  "indico.ifj.edu.pl",
  "mocom.xmu.edu.cn",
  "unpkg.com",
  "vldb.org",
  "aapm.onlinelibrary.wiley.com",
  "repository.universitasbumigora.ac.id",
  "academic.oup.com",
  "*.github.io",
  "apktool.org",
  "*.oracle.com",
  "research-repository.griffith.edu.au",
  "reabic.net",
  "iovs.arvojournals.org",
  "flowchart.js.org",
  "scrapy.org",
  "ee.cuhk.edu.hk",
  "gfzpublic.gfz-potsdam.de",
  "mental.jmir.org",
  "file.fouladi.ir",
  "*.graph.qq.com",
  "scis.scichina.com",
  "*.sinaimg.cn",
  "*.simpleanalyticscdn.com",
  "ueaeprints.uea.ac.uk",
  "webextension.org",
  "*.hanspub.org",
  "eartharxiv.org",
  "alipay.com",
  "*.usgs.gov",
  "jstatsoft.org",
  "python.org",
  "hlevkin.com",
  "osf.io",
  "mail.qq.com",
  "emerald.com",
  "lit2talks.com",
  "*.holoviz.org",
  "*.gongkaoshequ.com",
  "degruyter.com",
  "agupubs.onlinelibrary.wiley.com",
  "frontiersin.org",
  "*.sagepub.com",
  "esann.org",
  "mae.ucf.edu",
  "techrxiv.org",
  "*.githubusercontent.com",
  "h2o-release.s3.amazonaws.com",
  "microsoft.com",
  "*.neea.edu.cn",
  "apsnet.org",
  "*.cloudflareinsights.com",
  "docs-neteasecloudmusicapi.vercel.app",
  "*.riskified.com",
  "*.jsdelivr.net",
  "*.sciencedirect.com",
  "pdfs.semanticscholar.org",
  "*.apta.gov.cn",
  "*.9game.cn",
  "iris.uniroma1.it",
  "*.visualwebsiteoptimizer.com",
  "tallinzen.net",
  "pmc.ncbi.nlm.nih.gov",
  "frida.re",
  "cell.com",
  "orbilu.uni.lu",
  "proceedings.mlr.press",
  "research-portal.uu.nl",
  "google.com",
  "drpress.org",
  "*.tidymodels.org",
  "oa.upm.es",
  "files.eric.ed.gov",
  "*.nvidia.com",
  "*.siam.org",
  "anapub.co.ke",
  "captcha.gtimg.com",
  "pptr.dev",
  "nsojournals.onlinelibrary.wiley.com",
  "mediatum.ub.tum.de",
  "www.wjx.cn",
  "repository.ubn.ru.nl",
  "courses.cs.duke.edu",
  "*.googletagmanager.com",
  "kimi.com",
  "igb.uci.edu",
  "geospatialhealth.net",
  "seamlessaccess.org",
  "*.rust-lang.org",
  "*.wandoujia.com",
  "yuque.com",
  "badge.dimensions.ai",
  "zwang4.github.io",
  "core.ac.uk",
  "openreview.net",
  "*.kaggle.com",
  "fondazionemcr.it",
  "physicamedica.com",
  "dspace.rsu.lv",
  "keevin60907.github.io",
  "perpustakaan.atmaluhur.ac.id",
  "dada.cs.washington.edu",
  "opus.bibliothek.uni-augsburg.de",
  "bakerlab.org",
  "*.netzel.pl",
  "live.com",
  "eprint.iacr.org",
  "*.typekit.net",
  "journals.plos.org",
  "ant.design",
  "mc-stan.org",
  "ij-aquaticbiology.com",
  "*.alipayobjects.com",
  "int-res.com",
  "*.biologists.com",
  "*.cloudflare.com",
  "electronjs.org",
  "ajnr.org",
  "changfengbox.top",
  "zslpublications.onlinelibrary.wiley.com",
  "mermaid.js.org",
  "*.kaggle.io",
  "royalsocietypublishing.org",
  "ngcc.cn",
  "*.microsoft.com",
  "ink.library.smu.edu.sg",
  "naec.org.uk",
  "sci-hub.gg",
  "assets.pubpub.org",
  "elifesciences.org",
  "icir.org",
  "sci2s.ugr.es",
  "*.hubspot.com",
  "lib.baomitu.com",
  "music.163.com",
  "pages.charlotte.edu",
  "dspace.aztidata.es",
  "qmro.qmul.ac.uk",
  "keras.io",
  "*.msftconnecttest.com",
  "git-scm.com",
  "msftconnecttest.com",
  "service.seamlessaccess.org",
  "passmark.com",
  "ietresearch.onlinelibrary.wiley.com",
  "*.journal-grail.science",
  "bit.ly",
  "nature.com",
  "wiley.com",
  "pofflab.colostate.edu",
  "embopress.org",
  ",*.cnzz.com",
  "wins.or.kr",
  "repositorio.unesp.br",
  "duo.uio.no",
  "projectpythia.org",
  "mhealth.jmir.org",
  "*.nih.gov",
  "rodconnolly.com",
  "novami.com",
  "*.openai.com",
  "*.cookielaw.org",
  "ssl.ptlogin2.graph.qq.com",
  "arcgis.com",
  "ffmpeg.org",
  "ijcsrr.org",
  "kaggle.com",
  "*.informs.org",
  "aaai.org",
  "papers.ssrn.com",
  "*.ieee.org",
  "editor.md.ipandao.com",
  "dam-oclc.bac-lac.gc.ca",
  "citeseerx.ist.psu.edu",
  "researchonline.gcu.ac.uk",
  "*.theoj.org",
  "epub.uni-regensburg.de",
  "ambridge.org",
  "puiij.com",
  "*.strongvpn.com",
  "webapps.fhsu.edu",
  "prodregistryv2.org",
  "redux-toolkit.js.org",
  "udrc.eng.ed.ac.uk",
  "*.kaggleusercontent.com",
  "*.weixin.qq.com",
  "qzapp.qlogo.cn",
  "pages.cs.wisc.edu",
  "pubs.rsna.org",
  "helper.ipam.ucla.edu",
  "*.readthedocs.org",
  "research.tue.nl",
  "*.52pojie.cn",
  "hcjournal.org",
  "preprints.org",
  "*.gyan.dev",
  "people.cs.uct.ac.za",
  "jmir.org",
  "etd.ohiolink.edu",
  "michaelfullan.ca",
  "onlinelibrary.wiley.com",
  "repository.kaust.edu.sa",
  "cv-foundation.org",
  "*.25pp.com",
  "aegis.qq.com",
  "*.qutebrowser.org",
  "usenix.org",
  "publish.csiro.au",
  "browser-intake-datadoghq.com",
  "*.epfl.ch",
  "proceedings.neurips.cc",
  "besjournals.onlinelibrary.wiley.com",
  "fs.usda.gov",
  "pytorch.org",
  "cummings-lab.org",
  "muroran-it.repo.nii.ac.jp",
  "pubs.rsc.org",
  "research.google.com",
  "bg.copernicus.org",
  "eprints.utm.my",
  "connormwood.com",
  "openai.com",
  "*.springer.com",
  "*.alipay.com",
  "alvinang.sg",
  "nowpublishers.com",
  "ajol.info",
  "structuraltopicmodel.com",
  "imgcache.qq.com",
  "openresearch.surrey.ac.uk",
  "*.jquery.com",
  "ias.ac.in",
  "*.mmstat.com",
  "gitlab.com",
  "*.wiley.com",
  "cse.fau.edu",
  "deeplearning.ir",
  "reproducible-builds.org",
  "repositories.lib.utexas.edu",
  "oup.silverchair-cdn.com",
  "github.com",
  "*.aliyun.com",
  "alyssax.com",
  "arodes.hes-so.ch",
  "*.aegis.qq.com",
  "*.azure.com",
  "discovery.ucl.ac.uk",
  "s.gravatar.com",
  "*.esri.com",
  "aslopubs.onlinelibrary.wiley.com",
  "covert.io",
  "*.ucdl.pp.uc.cn",
  "open.bu.edu",
  "*.sonaliyadav.workers.dev",
  "tensorflow-dot-devsite-v2-prod-3p.appspot.com",
  "*.google.com",
  "nwr.gov.cn",
  "thuvienso.hoasen.edu.vn",
  "indianecologicalsociety.com",
  "pure.iiasa.ac.at",
  "*.iop.org",
  "springer.com",
  "bsapubs.onlinelibrary.wiley.com",
  "ira.lib.polyu.edu.hk",
  "pnas.org",
  "ws",
  "sentic.net",
  "alipayobjects.com",
  "cabidigitallibrary.org",
  "mednexus.org",
  "smujo.id",
  "wandoujia.com",
  "www.npmjs.com",
  "*.tensorflow.org",
  "sscdigitalstorytelling.pbworks.com",
  "eprints.lse.ac.uk",
  "cerf.radiologie.fr",
  "jastt.org",
  "scholar.archive.org",
  "*.gstatic.com",
  "www-ai.ijs.si",
  "*.adobedtm.com",
  "github.githubassets.com",
  "digital.csic.es",
  "ri.conicet.gov.ar",
  "aka.ms",
  "deno.com",
  "106.54.215.74",
  "*.cdn-go.cn",
  "*.chatgpt.com",
  "digitalcommons.usu.edu",
  "pubs.acs.org",
  "arlis.org",
  "cdnsciencepub.com",
  "thilowellmann.de",
  " fourier.taobao.com",
  "openaging.com",
  "orbi.uliege.be",
  "gitlab.jsc.fz-juelich.de",
  "*.mail.qq.com",
  "localhost",
  "*.dkut.ac.ke",
  "playwright.dev",
  "*.codabench.org",
  "xarray.dev",
  "bjo.bmj.com",
  "sciendo.com",
  "sendimage.whu.edu.cn",
  "*.els-cdn.com",
  "*.oaiusercontent.com",
  "*.cgiar.org",
  "*.npmjs.com",
  "gee-community-catalog.org",
  "*.researchcommons.org",
  "*.uclouvain.be",
  "*.r-lib.org",
  "plausible.io",
  "numfocus.org",
  "awesome-poetry.top",
  "*.privado.ai",
  "ggepi.lukewjohnston.com",
  "research.bangor.ac.uk",
  "*.office.com",
  "scholarpedia.org",
  "frankxue.com",
  "res.wx.qq.com",
  "scirp.org",
  "fonts.gstatic.com",
  "peerj.com",
  "*.silverchair.com",
  "isprs-archives.copernicus.org",
  "redux.js.org",
  "repository.law.indiana.edu",
  "openaccess.thecvf.com",
  "cirlmemphis.com",
  "drive.google.com",
  "iforest.sisef.org",
  "mercurial-scm.org",
  "esj-journals.onlinelibrary.wiley.com",
  "opg.optica.org",
  "*.nature.com",
  "science.org",
  "*.alibabachengdun.com",
  "bme.ufl.edu",
  "docs.geetest.com",
  "witpress.com",
  "holoviews.org",
  "iaees.org",
  "doi.org",
  "*.live.com",
  "logic.pdmi.ras.ru",
  "acm.org",
  "hackveda.in",
  "ebooks.iospress.nl",
  "pydub.com",
  "researchsquare.com",
  "nber.org",
  "*.scienceconnect.io",
  "*.r-project.org",
  "diva-portal.org",
  "www5.informatik.uni-erlangen.de",
  "lavaan.org",
  "*.gradle.org",
  "osgeo.org",
  "arxiv.org",
  "lgincdnvzeuno.azureedge.net",
  "learningsys.org",
  "*.jinshujufiles.com",
  "featureassets.org",
  "*.ansfoundation.org",
  "codelibrary.info",
  "shizuku.rikka.app",
  "philsci-archive.pitt.edu",
  "repository.library.noaa.gov",
  "ecoevorxiv.org",
  "*.mdpi-res.com",
  "ingentaconnect.com",
  "sp0.baidu.com",
  "ieeeprojects.eminents.in",
  "*.amap.com",
  "figshare.com",
  "www.52pojie.cn",
  "norma.ncirl.ie",
  "ddkang.github.io",
  "rustup.rs",
  "ecmlpkdd2017.ijs.si",
  "projecteuclid.org",
  "cbml.science",
  "ere.ac.cn",
  "*.qt.io",
  "dlib.hust.edu.vn",
  "doc.ic.ac.uk",
  "researchonline.ljmu.ac.uk",
  "*.microsoftonline.com",
  "ojs.aaai.org",
  "projectstorm.cloud",
  "dataorigami.net",
  "joss.theoj.org"
];


const blockedUrls = [
  "*://www.google.com/search*",
  ".*firefox.*",
  ".*firefox",
  "*://camo.githubusercontent.com/*" // 用于阻止包含“firefox”的 URL 的正则表达式
];

const onBeforeRequest = (details) => {
  const url = new URL(details.url);
  const host = url.hostname;

  // 检查是否在被阻止的 URL 列表中
  const isBlocked = blockedUrls.some(pattern => {
    const regex = new RegExp(pattern.replace(/\*/g, '.*'));
    return regex.test(details.url); // 检查整个 URL
  });

  if (isBlocked) {
    console.log(`Blocked URL: ${details.url}`);
    return { cancel: true }; // 拦截请求
  }

  // 检查是否在允许的 URL 列表中
  const isAllowed = allowedUrls.some(pattern => {
    // 处理通配符
    if (pattern.startsWith("*.") && host.endsWith(pattern.slice(2))) {
      return true;
    }
    return host === pattern || host === 'www.' + pattern; // 检查主机名
  });

  if (!isAllowed) {
    console.log(`Blocked URL: ${details.url}`);
    return { cancel: true }; // 拦截请求
  }

  return { cancel: false }; // 允许请求
};

// 监听所有请求
browser.webRequest.onBeforeRequest.addListener(
  onBeforeRequest,
  { urls: ["<all_urls>"] },
  ["blocking"]
);
